# ApplePay

CSR：服务端依赖私钥解密交易数据

## 苹果开发者帐号迁移

> App从帐号A迁移到了帐号B需要重新配置支付证书，迁移过程中生产环境支付流程会受到影响
> 具体取决依赖证书解密的服务缓存时间，苹果的证书更新也有一定的延迟（实测1小时内）

1. 重新获得CSR（自建或者第三方提供，例如银联支付）
2. 在旧帐号中revoke支付证书，并删除对应的merchant id
3. 在新帐号中创建同名的merchat id，并且通过新的CSR生成新的支付证书

> 迁移完成后生产环境一定时间后支付流程正常

## 支付证书到期

> 在支付证书即将到期时需要重新生成新的支付证书
> 影响同开发者帐号迁移

1. 重新获得CSR（自建或者第三方提供，例如银联支付）
2. 在对应merchat id下通过新的CSR生成新的支付证书，然后点击active生效，此时旧证书会被revoke

> 迁移完成后生产环境一定时间后支付流程正常
